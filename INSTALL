# Installation from source

## Preparation on Debian 9

Install dependencies.

	sudo apt-get install git gcc make zlib1g-dev libgnutls28-dev libavformat-dev ffmpeg

If you want to use the graphical interface (using GTK+), some additional packages are needed.

	sudo apt-get install libgtk2.0-dev

## Preparation on Fedora 26

Setup RPM fusion to get access to all dependencies.

	sudo dnf install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm

Install dependencies.

	sudo dnf install git zlib-devel gnutls-devel ffmpeg-devel

If you want to use the graphical interface (using GTK+), some additional packages are needed.

	sudo dnf install gtk2-devel

## Preparation on FreeBSD 11.1

Install dependencies (as root).

	cd /usr/ports/devel/git && make install clean
pkgconf
	cd /usr/ports/lang/gcc && make install clean
	cd /usr/ports/security/gnutls && make install clean
	cd /usr/ports/multimedia/ffmpeg && make install clean

If you want to use the graphical interface (using GTK+), some additional packages are needed.

	cd /usr/ports/multimedia/x11-toolkits/gtk20 && make install clean

## Preparation on MacOS X 10.8

Download Xcode from https://developer.apple.com/xcode/ and install it.
Download Macports from https://www.macports.org/ and install it.

Install git.

	port install git

## Installation

Download the source.

	git clone https://github.com/filement/filement.git
	cd filement

Prepare the source for compilation.

	./configure

Compile the source with one of the following commands:

	make filement-gtk	# compiles only the graphical frontend
	make filement		# compiles only the command line frontend
	make all			# compiles both frontends

Install filement.

	sudo make install

If you install the graphical interface, you may want to update the index of available icons.

	sudo gtk-update-icon-cache /usr/share/icons/hicolor

# Running Filement

Two executables are available. Both can be used to start the filement device server. On the first start, the device must be registered in the Filement infrastructure. After the registration, the device will start automatically on login.

executable name: filement
	Intended to be used from the command line.

executable name: filement-gtk
	Intended to be used from a graphical environment (available in the category Network applications).

TODO
	command line app
		version information
		reset while a device is running
	gui app
		version information
		more robust code (create directories in the path, make sure there are no memory leaks and concurrency problems, etc.)
	version and platform information on customly compiled devices
	fix upgrade
		how do I know the executable so that I can restart it?
	debian and fedora package
